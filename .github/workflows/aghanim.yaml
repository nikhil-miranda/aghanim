name: Get commit message
on:
  push:
    branches:
      - main
jobs:
  get-commit-message:
    runs-on: ubuntu-latest
    env:
      commit_message: ${{ github.event.head_commit.message }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      
      - name: Split commit message
        run: |
          if [[ "${commit_message}" == * "---"* ]]; then
            commit_message_parts=(${commit_message//---/ })
          else
            commit_message_parts=(""$commit_message"")
          fi
      - name: Store splitted message
        run: |
          echo "summary=${commit_message_parts[0]}"
          echo "body=${commit_message_parts[1]}"
          echo "footer=${commit_message_parts[2]}"